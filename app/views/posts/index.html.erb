<main class="main-content position-relative">
  <div class="container-fluid py-4 px-sm-4 min-vh-100">
    <div class="mx-auto max-width-1000">
      <div class="row">
        <% @posts.each do |post| %>
          <div class="col-12 col-sm-6 col-md-4 my-2 my-sm-3 mx-auto mx-sm-0 px-0 px-sm-3 max-width-400">
            <%= link_to post_path(id: post.id), data: { turbo: false } do %>
              <div class="m-lg-1 bg-white">
                <div class="p-2">
                  <div class="d-flex p-1">
                    <%= image_tag post.user.avatar.url, class: "rounded-circle avatar-thumbnail me-2" %>
                    <div class="d-table">
                      <p class="text-dark fs-15 fw-bold d-table-cell align-middle"><%= post.user.name %>
                      </p>
                    </div>
                  </div>
                </div>
                <%= image_tag post.photos[0].url.to_s, class: "w-100" %>
                <div class="p-2">
                  <p class="p-1 fs-15 fw-bold text-dark text-ellipsis lh-sm"><%= post.title %><br>
                    <span class="text-xs fw-normal text-secondary lh-base"><%= date_posted(post) %></span>
                  </p>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <div class="fixed-plugin">
    <div class="fixed-plugin-button position-fixed rounded-pill px-3 py-2 btn bg-gradient-primary">
      <% if current_user %>
        <%= link_to :new_post, data: { turbo_frame: "modal" } do %>
          <p class="py-1 text-white fw-bold"><i class="material-icons" style="vertical-align: -3.5px;">add_circle</i> 旅の思い出を投稿</p>
        <% end %>
      <% else %>
        <%= link_to :new_user_session do %>
          <p class="py-1 text-white fw-bold"><i class="material-icons" style="vertical-align: -3.5px;">add_circle</i> 旅の思い出を投稿</p>
        <% end %>
      <% end %>
    </div>
  </div>
</main>
