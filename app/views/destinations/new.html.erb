<%= render "layouts/modal", title: "スポット情報" do %>
  <% if @error %>
    <p class="text-sm text-danger"><span class="material-symbols-outlined fs-6 pe-1" style="vertical-align: -2.8px;">error</span><%= @error %></p>
  <% else %>
  <%= render "place_details", place_details: @place_details %>
    <%= turbo_frame_tag "destination" do %>
      <%= form_with model: [@itinerary, @destination] do |f| %>
        <%= f.hidden_field :place_id, value: @place_id %>
        <% if destinations_include?(@itinerary, @place_id) %>
          <button class="btn btn-outline-primary d-block mt-3 w-100" disabled>行きたい場所リストに追加済み</button>
        <% elsif @itinerary.destinations.count >= 3 %>
          <%= f.submit "行きたい場所リストに追加する", class: "btn bg-gradient-primary d-block mt-3 mb-1 w-100", disabled: true %>
          <p class="text-dark text-xs">※ひとつの旅のプランにつき、行きたい場所リストへの登録は300件までです。</p>
        <% else %>
          <%= f.submit "行きたい場所リストに追加する", class: "btn bg-gradient-primary d-block mt-3 w-100" %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
